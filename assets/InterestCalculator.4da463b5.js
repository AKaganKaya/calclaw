import{r as u,h as d,j as a,$ as v,G as g,a2 as b,a0 as $,a3 as C,N as M,J as j,a1 as Y,m as z,i as R,a4 as E}from"./vendor.9b4efd97.js";import{u as L}from"./index.38ae5ee3.js";async function N(e){const n=e==="avans"?"avans-faiz.json":"yasal-faiz.json",l=await fetch(`/${n}`);if(!l.ok)throw new Error(`Error fetching ${n}`);return await l.json()}function T(e){if(e instanceof Date)return e;if(e.match(/^\d{4}-\d{2}-\d{2}$/))return new Date(e);if(typeof e=="string"&&e.includes(".")){const[n,l,i]=e.split(".");return!n||!l||!i?(console.error("Invalid date format:",e),null):new Date(`${i}-${l}-${n}`)}return console.error("Invalid date format:",e),null}async function k(e,n,l,i){var x;const r=await N(i);console.log(`\xC7ekilen ${i} oranlar\u0131:`,r);const o=T(e),c=T(n);if(!o||!c)throw new Error("Ge\xE7ersiz tarih format\u0131");let p=new Date(o),y=0;const f=[];for(let s=0;s<r.length;s++){const h=T(r[s].startDate),D=s+1<r.length?T(r[s+1].startDate):c;if(!h||!D)continue;const t=p>h?p:h,m=D<c?D:c;if(t>=m)continue;const w=Math.ceil((m.getTime()-t.getTime())/(1e3*60*60*24)),S=(x=r[s].rate)!=null?x:r[s].avansRate,I=parseFloat(S);if(isNaN(I)){console.warn("Ge\xE7ersiz faiz oran\u0131 bulundu, atlan\u0131yor: ",r[s]);continue}const F=l*(I/100)*(w/365);y+=F,f.push({periodStart:t.toLocaleDateString("tr-TR"),periodEnd:m.toLocaleDateString("tr-TR"),diffDays:w,rate:I,interest:F.toFixed(2)})}return{totalInterest:y.toFixed(2),interestDetails:f}}const A=()=>{const{formatMessage:e}=L(),[n,l]=u.exports.useState(null),[i,r]=u.exports.useState(null),[o,c]=u.exports.useState(null),[p,y]=u.exports.useState(null),[f,x]=u.exports.useState([]),[s,h]=u.exports.useState("avans"),D=async()=>{if(!i||!o||!n){z.warning(e({id:"app.interest.warning",defaultMessage:"L\xFCtfen t\xFCm alanlar\u0131 doldurun."}));return}const{totalInterest:t,interestDetails:m}=await k(i,o,n,s);y(`${e({id:"app.interest.totalInterest",defaultMessage:"Toplam \u0130\u015Flenen Faiz:"})} ${parseFloat(t).toLocaleString("tr-TR",{style:"currency",currency:"TRY"})}`),x(m),l(null),r(null),c(null)};return d("div",{className:"interest-calculator-page",children:[a(v.Title,{level:3,children:e({id:"app.interest.title"})}),a(v.Paragraph,{children:e({id:"app.interest.description"})}),a(Y,{children:d(g,{layout:"vertical",children:[a(g.Item,{label:e({id:"app.interest.type",defaultMessage:"Faiz T\xFCr\xFC"}),children:a(b,{value:s,onChange:t=>h(t),options:[{value:"avans",label:"Avans Faizi"},{value:"yasal",label:"Yasal Faiz"}]})}),a(g.Item,{label:e({id:"app.interest.amount"}),children:a($,{style:{width:"100%"},min:0,value:n!=null?n:void 0,onChange:t=>l(t!=null?t:null),placeholder:e({id:"app.interest.amountPlaceholder"})})}),a(g.Item,{label:e({id:"app.interest.startDate",defaultMessage:"Start Date"}),children:a(C,{style:{width:"100%"},format:"YYYY-MM-DD",value:i?M(i):null,onChange:t=>r(t?t.format("YYYY-MM-DD"):null)})}),a(g.Item,{label:e({id:"app.interest.endDate"}),children:a(C,{style:{width:"100%"},format:"YYYY-MM-DD",value:o?M(o):null,onChange:t=>c(t?t.format("YYYY-MM-DD"):null)})}),a(j,{type:"primary",block:!0,onClick:D,children:e({id:"app.interest.calculate"})})]})}),f.length>0&&d(Y,{style:{marginTop:24},children:[a(v.Title,{level:5,children:e({id:"app.interest.detailTitle"})}),a(R,{dataSource:f,renderItem:t=>a(R.Item,{children:d(E,{direction:"vertical",children:[d("div",{children:[t.periodStart," - ",t.periodEnd," (",t.diffDays," g\xFCn)"]}),d("div",{children:[t.rate,"% \u2794"," ",parseFloat(t.interest).toLocaleString("tr-TR",{style:"currency",currency:"TRY"})]})]})})})]}),p&&a(Y,{style:{marginTop:24},children:a(v.Title,{level:5,children:p})})]})};export{A as default};
