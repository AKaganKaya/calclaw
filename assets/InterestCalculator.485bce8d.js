import{r as D,i as o,j as n,a1 as g,H as y,a2 as C,a4 as v,W as M,K as F,a3 as w,m as S,k as R,a5 as j}from"./vendor.3291ae0a.js";import{u as E}from"./index.4535ca2b.js";async function L(){const e=await fetch("/avans-faiz.json");if(!e.ok)throw new Error("Error fetching avans-faiz.json");return await e.json()}function x(e){if(e instanceof Date)return e;if(e.match(/^\d{4}-\d{2}-\d{2}$/))return new Date(e);if(typeof e=="string"&&e.includes(".")){const[r,i,a]=e.split(".");return!r||!i||!a?(console.error("Invalid date format:",e),null):new Date(`${a}-${i}-${r}`)}return console.error("Invalid date format:",e),null}async function b(e,r,i){const a=await L();console.log("\xC7ekilen faiz oranlar\u0131:",a);const c=x(e),l=x(r);if(!c||!l)throw new Error("Ge\xE7ersiz tarih format\u0131");let u=new Date(c),d=0;const m=[];for(let s=0;s<a.length;s++){const p=x(a[s].startDate),f=s+1<a.length?x(a[s+1].startDate):l;if(!p||!f)continue;const t=u>p?u:p,h=f<l?f:l;if(t>=h)continue;const I=Math.ceil((h.getTime()-t.getTime())/(1e3*60*60*24)),Y=parseFloat(a[s].avansRate);if(isNaN(Y)){console.warn("Ge\xE7ersiz faiz oran\u0131 bulundu, atlan\u0131yor: ",a[s]);continue}const T=i*(Y/100)*(I/365);d+=T,m.push({periodStart:t.toLocaleDateString("tr-TR"),periodEnd:h.toLocaleDateString("tr-TR"),diffDays:I,rate:Y,interest:T.toFixed(2)})}return{totalInterest:d.toFixed(2),interestDetails:m}}const $=()=>{const{formatMessage:e}=E(),[r,i]=D.exports.useState(null),[a,c]=D.exports.useState(null),[l,u]=D.exports.useState(null),[d,m]=D.exports.useState(null),[s,p]=D.exports.useState([]),f=async()=>{if(!a||!l||!r){S.warning(e({id:"app.interest.warning",defaultMessage:"L\xFCtfen t\xFCm alanlar\u0131 doldurun."}));return}const{totalInterest:t,interestDetails:h}=await b(a,l,r);m(`${e({id:"app.interest.totalInterest",defaultMessage:"Toplam \u0130\u015Flenen Faiz:"})} ${parseFloat(t).toLocaleString("tr-TR",{style:"currency",currency:"TRY"})}`),p(h),i(null),c(null),u(null)};return o("div",{className:"interest-calculator-page",children:[n(g.Title,{level:3,children:e({id:"app.interest.title"})}),n(g.Paragraph,{children:e({id:"app.interest.description"})}),n(w,{children:o(y,{layout:"vertical",children:[n(y.Item,{label:e({id:"app.interest.amount"}),children:n(C,{style:{width:"100%"},min:0,value:r!=null?r:void 0,onChange:t=>i(t!=null?t:null),placeholder:e({id:"app.interest.amountPlaceholder"})})}),n(y.Item,{label:e({id:"app.interest.startDate",defaultMessage:"Start Date"}),children:n(v,{style:{width:"100%"},format:"YYYY-MM-DD",value:a?M(a):null,onChange:t=>c(t?t.format("YYYY-MM-DD"):null)})}),n(y.Item,{label:e({id:"app.interest.endDate"}),children:n(v,{style:{width:"100%"},format:"YYYY-MM-DD",value:l?M(l):null,onChange:t=>u(t?t.format("YYYY-MM-DD"):null)})}),n(F,{type:"primary",block:!0,onClick:f,children:e({id:"app.interest.calculate"})})]})}),s.length>0&&o(w,{style:{marginTop:24},children:[n(g.Title,{level:5,children:e({id:"app.interest.detailTitle"})}),n(R,{dataSource:s,renderItem:t=>n(R.Item,{children:o(j,{direction:"vertical",children:[o("div",{children:[t.periodStart," - ",t.periodEnd," (",t.diffDays," g\xFCn)"]}),o("div",{children:[t.rate,"% \u2794"," ",parseFloat(t.interest).toLocaleString("tr-TR",{style:"currency",currency:"TRY"})]})]})})})]}),d&&n(w,{style:{marginTop:24},children:n(g.Title,{level:5,children:d})})]})};export{$ as default};
